[gd_scene load_steps=15 format=3 uid="uid://cwr2lvisdm7bi"]

[ext_resource type="PackedScene" uid="uid://bf7hxnp0di86k" path="res://SecondHouse/SecondHouseUpdate.glb" id="1_d2565"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="1_ed02g"]
[ext_resource type="Shader" path="res://ShaderScripts/pixel.gdshader" id="2_jqpty"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3d.gd" id="3_r36w6"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="4_8hl4b"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/resources/camera_3d_resource.gd" id="5_ul3qm"]

[sub_resource type="Curve3D" id="Curve3D_qvxdk"]
bake_interval = 1.0
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 1.03, 0, 0.07, 0, 0, 0, 0, 0, 0, 1.29, 0, 0.21, 0, 0, 0, 0, 0, 0, 1.51, 0, 0.15),
"tilts": PackedFloat32Array(0, 0, 0)
}
point_count = 3

[sub_resource type="ShaderMaterial" id="ShaderMaterial_a06vb"]
render_priority = 0
shader = ExtResource("2_jqpty")
shader_parameter/depth_threshold = 0.25
shader_parameter/reverse_depth_threshold = 0.25
shader_parameter/normal_threshold = 0.6
shader_parameter/darken_amount = 0.3
shader_parameter/lighten_amount = 1.5
shader_parameter/normal_edge_bias = Vector3(1, 1, 1)
shader_parameter/light_direction = Vector3(-0.96, -0.18, 0.2)

[sub_resource type="QuadMesh" id="QuadMesh_bm23y"]
material = SubResource("ShaderMaterial_a06vb")
size = Vector2(2, 2)

[sub_resource type="Resource" id="Resource_pey7g"]
script = ExtResource("4_8hl4b")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="Resource" id="Resource_7nwko"]
script = ExtResource("5_ul3qm")
cull_mask = 1048575
h_offset = 0.23
v_offset = 0.5
projection = 1
fov = 75.0
size = 2.2
frustum_offset = Vector2(0, 0)
near = 0.001
far = 4007.19

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_hscfb"]
energy_multiplier = 0.51

[sub_resource type="Sky" id="Sky_c16lh"]
sky_material = SubResource("ProceduralSkyMaterial_hscfb")

[sub_resource type="Environment" id="Environment_8mbkn"]
background_mode = 2
background_energy_multiplier = 1.49
sky = SubResource("Sky_c16lh")
sky_custom_fov = 87.3
ambient_light_color = Color(0.47092, 0.448749, 0.427202, 1)
ambient_light_sky_contribution = 0.0
ambient_light_energy = 0.82
tonemap_mode = 2
glow_enabled = true
glow_intensity = 0.98
glow_strength = 0.77
glow_bloom = 0.82
glow_hdr_threshold = 0.75
glow_hdr_luminance_cap = 13.85
fog_light_color = Color(0.384694, 0.416805, 0.467277, 1)
fog_light_energy = 1.99
fog_density = 0.006
volumetric_fog_enabled = true
volumetric_fog_density = 0.0
volumetric_fog_albedo = Color(0.603248, 0.603248, 0.603248, 1)
volumetric_fog_emission = Color(0.288518, 0.288518, 0.288518, 1)
volumetric_fog_emission_energy = 0.0
volumetric_fog_gi_inject = 0.44
volumetric_fog_anisotropy = 0.0
volumetric_fog_length = 45.52
volumetric_fog_detail_spread = 2.7991
volumetric_fog_ambient_inject = 0.21

[node name="Main" type="Node3D"]

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true
stretch_shrink = 6

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(320, 180)
render_target_update_mode = 4

[node name="CameraSystem" type="Node" parent="SubViewportContainer/SubViewport"]

[node name="Paths" type="Node" parent="SubViewportContainer/SubViewport/CameraSystem"]

[node name="CamPath" type="Path3D" parent="SubViewportContainer/SubViewport/CameraSystem/Paths"]
transform = Transform3D(0.768661, 0, 0, 0, 0.999162, 0.0237558, 0, -0.040934, 0.579859, -1.23717, 2.89848, -3.13051)
curve = SubResource("Curve3D_qvxdk")

[node name="Camera3D" type="Camera3D" parent="SubViewportContainer/SubViewport/CameraSystem"]
transform = Transform3D(-1.0065, -0.00181463, 0.001626, -1.44766e-07, 0.674463, 0.750982, -0.00242927, 0.751796, -0.673729, 0.0528331, 2.89848, -2.92051)
h_offset = 0.23
v_offset = 0.5
projection = 1
current = true
size = 2.2
near = 0.001
far = 4007.19

[node name="PhantomCameraHost" type="Node" parent="SubViewportContainer/SubViewport/CameraSystem/Camera3D"]
script = ExtResource("1_ed02g")

[node name="PixelEffect" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/CameraSystem/Camera3D"]
transform = Transform3D(-2.06982, 0.00379726, 0.00203619, -0.00198912, 1.05641, -0.308058, -0.0104998, -0.948679, -0.343031, 0.0133445, -1.31957, -2.3806)
transparency = 0.16
extra_cull_margin = 16384.0
mesh = SubResource("QuadMesh_bm23y")
skeleton = NodePath("../../..")

[node name="PhantomCamera3D" type="Node3D" parent="SubViewportContainer/SubViewport/CameraSystem" node_paths=PackedStringArray("follow_target", "follow_path", "look_at_target")]
transform = Transform3D(-1.0065, -0.00181463, 0.001626, -1.44766e-07, 0.674463, 0.750982, -0.00242927, 0.751796, -0.673729, 0.0528331, 2.89848, -2.92051)
script = ExtResource("3_r36w6")
follow_mode = 4
follow_target = NodePath("")
follow_path = NodePath("../Paths/CamPath")
look_at_mode = 2
look_at_target = NodePath("")
tween_resource = SubResource("Resource_pey7g")
camera_3d_resource = SubResource("Resource_7nwko")
follow_damping = true
follow_damping_value = Vector3(0.361, 0.192, 0.187)
look_at_offset = Vector3(0.05, 0.1, -0.41)
look_at_damping = true
look_at_damping_value = 0.35

[node name="SecondHouseUpdate" parent="SubViewportContainer/SubViewport" instance=ExtResource("1_d2565")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.175388, 0, 0.00150537)

[node name="Characters" type="Node" parent="."]

[node name="Lighting" type="Node" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Lighting"]
environment = SubResource("Environment_8mbkn")

[node name="lightright" type="OmniLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.445799, 1.82535, 2.06671)
light_energy = 0.778

[node name="lightleft" type="OmniLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.705577, 1.82535, 2.03512)
light_energy = 0.778

[node name="room" type="SpotLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, -0.0437066, 0.999044, 0, -0.999044, -0.0437066, 0.3032, 3.03916, -0.165063)

[node name="shineinroom(godray)" type="SpotLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, -0.726239, 0.687442, 0, -0.687442, -0.726239, 0.3032, 3.03916, -3.31631)

[node name="Cameras" type="Node" parent="."]

[editable path="SubViewportContainer/SubViewport/SecondHouseUpdate"]
