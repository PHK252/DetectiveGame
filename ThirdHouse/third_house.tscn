[gd_scene load_steps=20 format=3 uid="uid://cqqnmstl4cse3"]

[ext_resource type="PackedScene" uid="uid://dfbv5oel5w2aw" path="res://ThirdHouse/ThirdHouseUpdate.glb" id="1_iqbbd"]
[ext_resource type="Shader" path="res://ShaderScripts/water.gdshader" id="2_7v6t1"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera_host/phantom_camera_host.gd" id="3_47evd"]
[ext_resource type="PackedScene" uid="uid://bqvssux5m1c" path="res://CharacterStuff/Dalton/Dalton.tscn" id="3_aanxs"]
[ext_resource type="Shader" path="res://ShaderScripts/pixel.gdshader" id="4_ftxu0"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/phantom_camera/phantom_camera_3d.gd" id="5_m8a2w"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/resources/tween_resource.gd" id="6_2s518"]
[ext_resource type="Script" path="res://addons/phantom_camera/scripts/resources/camera_3d_resource.gd" id="7_f6g8y"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_g30bh"]
resource_name = "water"
render_priority = 0
shader = ExtResource("2_7v6t1")
shader_parameter/WATER_COL = Color(0.04, 0.38, 0.88, 1)
shader_parameter/WATER2_COL = Color(0.04, 0.35, 0.78, 1)
shader_parameter/FOAM_COL = Color(0.8125, 0.9609, 0.9648, 1)
shader_parameter/distortion_speed = 2.0
shader_parameter/tile = Vector2(4.82, 5)
shader_parameter/height = 0.08
shader_parameter/wave_size = Vector2(2, 2)
shader_parameter/wave_speed = 1.5

[sub_resource type="ArrayMesh" id="ArrayMesh_w3h4r"]
_surfaces = [{
"aabb": AABB(-1, 0, -1, 2, 1e-05, 2),
"format": 34896613377,
"index_count": 6,
"index_data": PackedByteArray(0, 0, 3, 0, 1, 0, 0, 0, 2, 0, 3, 0),
"name": "water",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 4,
"vertex_data": PackedByteArray(0, 0, 0, 0, 255, 255, 0, 0, 255, 255, 0, 0, 255, 255, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 255, 255, 0, 0, 0, 0, 0, 0)
}]
blend_shape_mode = 0

[sub_resource type="ArrayMesh" id="ArrayMesh_5w1m0"]
resource_name = "ThirdHouseUpdate_Plane_001"
_surfaces = [{
"aabb": AABB(-1, 0, -1, 2, 1e-05, 2),
"attribute_data": PackedByteArray(0, 0, 255, 255, 255, 255, 255, 255, 0, 0, 0, 0, 255, 255, 0, 0),
"format": 34896613399,
"index_count": 6,
"index_data": PackedByteArray(0, 0, 3, 0, 1, 0, 0, 0, 2, 0, 3, 0),
"material": SubResource("ShaderMaterial_g30bh"),
"name": "water",
"primitive": 3,
"uv_scale": Vector4(0, 0, 0, 0),
"vertex_count": 4,
"vertex_data": PackedByteArray(0, 0, 0, 0, 255, 255, 255, 191, 255, 255, 0, 0, 255, 255, 255, 191, 0, 0, 0, 0, 0, 0, 255, 191, 255, 255, 0, 0, 0, 0, 255, 191, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127, 255, 255, 255, 127)
}]
blend_shape_mode = 0
shadow_mesh = SubResource("ArrayMesh_w3h4r")

[sub_resource type="Curve3D" id="Curve3D_ackjl"]
bake_interval = 1.0
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, 1.03, 0, 0.07, 0, 0, 0, 0, 0, 0, 1.29, 0, 0.21, 0, 0, 0, 0, 0, 0, 1.51, 0, 0.15),
"tilts": PackedFloat32Array(0, 0, 0)
}
point_count = 3

[sub_resource type="ShaderMaterial" id="ShaderMaterial_vkayd"]
render_priority = 0
shader = ExtResource("4_ftxu0")
shader_parameter/depth_threshold = 0.25
shader_parameter/reverse_depth_threshold = 0.25
shader_parameter/normal_threshold = 0.6
shader_parameter/darken_amount = 0.3
shader_parameter/lighten_amount = 1.5
shader_parameter/normal_edge_bias = Vector3(1, 1, 1)
shader_parameter/light_direction = Vector3(-0.96, -0.18, 0.2)

[sub_resource type="QuadMesh" id="QuadMesh_ciwxa"]
material = SubResource("ShaderMaterial_vkayd")
size = Vector2(2, 2)

[sub_resource type="Resource" id="Resource_1lgsd"]
script = ExtResource("6_2s518")
duration = 1.0
transition = 0
ease = 2

[sub_resource type="Resource" id="Resource_bffl6"]
script = ExtResource("7_f6g8y")
cull_mask = 1048575
h_offset = 0.23
v_offset = 0.5
projection = 1
fov = 75.0
size = 2.2
frustum_offset = Vector2(0, 0)
near = 0.001
far = 4007.19

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_0jim3"]
energy_multiplier = 0.51

[sub_resource type="Sky" id="Sky_f3u1y"]
sky_material = SubResource("ProceduralSkyMaterial_0jim3")

[sub_resource type="Environment" id="Environment_brfg1"]
background_mode = 2
background_energy_multiplier = 0.54
sky = SubResource("Sky_f3u1y")
sky_custom_fov = 71.0
ambient_light_source = 2
ambient_light_color = Color(0.47092, 0.448749, 0.427202, 1)
ambient_light_energy = 1.36
tonemap_mode = 2
glow_enabled = true
glow_intensity = 0.69
glow_strength = 0.77
glow_bloom = 0.38
glow_hdr_threshold = 0.75
glow_hdr_luminance_cap = 13.85
fog_light_color = Color(0.384694, 0.416805, 0.467277, 1)
fog_light_energy = 1.99
fog_density = 0.006
volumetric_fog_enabled = true
volumetric_fog_density = 0.0231
volumetric_fog_albedo = Color(0.794121, 0.794121, 0.79412, 1)
volumetric_fog_emission = Color(0.288518, 0.288518, 0.288518, 1)
volumetric_fog_emission_energy = 0.0
volumetric_fog_gi_inject = 0.44
volumetric_fog_anisotropy = 0.0
volumetric_fog_length = 45.52
volumetric_fog_detail_spread = 2.7991
volumetric_fog_ambient_inject = 0.21

[node name="Main" type="Node3D"]

[node name="SubViewportContainer" type="SubViewportContainer" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
stretch = true
stretch_shrink = 6

[node name="SubViewport" type="SubViewport" parent="SubViewportContainer"]
handle_input_locally = false
size = Vector2i(320, 180)
render_target_update_mode = 4

[node name="ThirdHouseUpdate" parent="SubViewportContainer/SubViewport" instance=ExtResource("1_iqbbd")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.162528, 0, -6.35064)

[node name="water" parent="SubViewportContainer/SubViewport/ThirdHouseUpdate" index="45"]
mesh = SubResource("ArrayMesh_5w1m0")

[node name="CameraSystem" type="Node" parent="SubViewportContainer/SubViewport"]

[node name="Paths" type="Node" parent="SubViewportContainer/SubViewport/CameraSystem"]

[node name="CamPath" type="Path3D" parent="SubViewportContainer/SubViewport/CameraSystem/Paths"]
transform = Transform3D(0.768661, 0, 0, 0, 0.999162, 0.0237558, 0, -0.040934, 0.579859, -1.23717, 2.89848, -3.13051)
curve = SubResource("Curve3D_ackjl")

[node name="Camera3D" type="Camera3D" parent="SubViewportContainer/SubViewport/CameraSystem"]
transform = Transform3D(-1.0065, -0.00181463, 0.001626, -1.44766e-07, 0.674463, 0.750982, -0.00242927, 0.751796, -0.673729, 0.0528331, 2.89848, -2.92051)
h_offset = 0.23
v_offset = 0.5
projection = 1
current = true
size = 2.2
near = 0.001
far = 4007.19

[node name="PhantomCameraHost" type="Node" parent="SubViewportContainer/SubViewport/CameraSystem/Camera3D"]
script = ExtResource("3_47evd")

[node name="PixelEffect" type="MeshInstance3D" parent="SubViewportContainer/SubViewport/CameraSystem/Camera3D"]
transform = Transform3D(-2.06982, 0.00379726, 0.00203619, -0.00198912, 1.05641, -0.308058, -0.0104998, -0.948679, -0.343031, 0.0133445, -1.31957, -2.3806)
transparency = 0.16
extra_cull_margin = 16384.0
mesh = SubResource("QuadMesh_ciwxa")
skeleton = NodePath("../../..")

[node name="PhantomCamera3D" type="Node3D" parent="SubViewportContainer/SubViewport/CameraSystem" node_paths=PackedStringArray("follow_path")]
transform = Transform3D(-1.0065, -0.00181463, 0.001626, -1.44766e-07, 0.674463, 0.750982, -0.00242927, 0.751796, -0.673729, 0.0528331, 2.89848, -2.92051)
script = ExtResource("5_m8a2w")
follow_mode = 4
follow_path = NodePath("../Paths/CamPath")
look_at_mode = 2
tween_resource = SubResource("Resource_1lgsd")
camera_3d_resource = SubResource("Resource_bffl6")
follow_damping = true
follow_damping_value = Vector3(0.361, 0.192, 0.187)
look_at_offset = Vector3(0.05, 0.1, -0.41)
look_at_damping = true
look_at_damping_value = 0.35

[node name="Lighting" type="Node" parent="."]

[node name="WorldEnvironment" type="WorldEnvironment" parent="Lighting"]
environment = SubResource("Environment_brfg1")

[node name="hanging" type="SpotLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, 0.0144333, 0.999896, 0, -0.999896, 0.0144333, 0.262571, 2.52162, -2.46197)

[node name="hanging2" type="SpotLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, 0.0144333, 0.999896, 0, -0.999896, 0.0144333, 1.3543, 3.59343, -4.51191)

[node name="hanging3" type="SpotLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, 0.0144333, 0.999896, 0, -0.999896, 0.0144333, -1.77123, 3.59343, -4.51191)

[node name="hanging4" type="SpotLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, 0.0144333, 0.999896, 0, -0.999896, 0.0144333, -0.181529, 2.40545, -7.1728)

[node name="Pool" type="SpotLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, 0.0144333, 0.999896, 0, -0.999896, 0.0144333, -1.02904, 5.37003, -8.86396)

[node name="Pool2" type="SpotLight3D" parent="Lighting"]
transform = Transform3D(1, 0, 0, 0, 0.0144333, 0.999896, 0, -0.999896, 0.0144333, 0.208403, 6.33748, -20.9864)

[node name="Characters" type="Node" parent="."]

[node name="Dalton" parent="Characters" instance=ExtResource("3_aanxs")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.64306, 0.0145638, -4.27563)

[node name="Skeleton3D" parent="Characters/Dalton/CharacterBody3D/DetectiveT7/DetectiveRig" index="0"]
bones/1/position = Vector3(-1.96937e-10, -5.75171e-08, -3.01776)
bones/1/rotation = Quaternion(5.33129e-09, 0.707107, 0.707107, -5.33127e-09)
bones/3/rotation = Quaternion(0.0200791, 0.312523, 0.877905, -0.362229)
bones/4/rotation = Quaternion(-0.215102, 0.0889827, -0.0382794, 0.971776)
bones/5/rotation = Quaternion(0.492859, -0.111009, 0.10325, 0.8568)
bones/6/rotation = Quaternion(0.348201, -0.0522738, -0.00853403, 0.935923)
bones/7/rotation = Quaternion(-0.0585857, 0.207451, 0.918651, -0.331078)
bones/8/rotation = Quaternion(-0.0200791, 0.312523, 0.877905, 0.362229)
bones/9/rotation = Quaternion(-0.215102, -0.0889827, 0.0382794, 0.971776)
bones/10/rotation = Quaternion(0.492859, 0.111009, -0.10325, 0.8568)
bones/11/rotation = Quaternion(0.348201, 0.0522738, 0.00853403, 0.935923)
bones/12/position = Vector3(-1.96937e-10, 3.01776, -2.69152e-07)
bones/12/rotation = Quaternion(0.305177, -3.03048e-08, 5.89247e-08, 0.952296)
bones/15/rotation = Quaternion(-0.0859625, 1.15541e-07, -1.28161e-08, 0.996298)
bones/16/rotation = Quaternion(0.0392533, 4.23046e-09, 1.27912e-08, 0.999229)
bones/18/rotation = Quaternion(0.0179302, -0.00986426, -0.0096437, 0.999744)
bones/20/rotation = Quaternion(0.0179302, 0.00986426, 0.00964371, 0.999744)
bones/21/rotation = Quaternion(-0.162069, 0.0334445, -0.754767, 0.634777)
bones/22/rotation = Quaternion(-0.255381, -0.149055, -0.404935, 0.865211)
bones/23/rotation = Quaternion(-0.00308026, -0.000445372, -0.282657, 0.959216)
bones/24/rotation = Quaternion(0.0187947, 0.00442635, -0.00950234, 0.999768)
bones/25/rotation = Quaternion(-0.162069, -0.0334445, 0.754767, 0.634777)
bones/26/rotation = Quaternion(-0.255381, 0.149055, 0.404934, 0.865212)
bones/27/rotation = Quaternion(-0.00308046, 0.000445365, 0.282659, 0.959216)
bones/28/rotation = Quaternion(0.0187947, -0.00442641, 0.00950234, 0.999768)
bones/30/rotation = Quaternion(-0.0106232, 0.707027, 0.707027, -0.0106232)
bones/31/position = Vector3(0.989774, 2.19292, -0.0311821)
bones/33/position = Vector3(-1.96937e-10, 3.01776, -1.17122e-07)
bones/36/position = Vector3(-0.989774, 2.19292, -0.0311821)

[editable path="SubViewportContainer/SubViewport/ThirdHouseUpdate"]
[editable path="Characters/Dalton"]
[editable path="Characters/Dalton/CharacterBody3D/DetectiveT7"]
